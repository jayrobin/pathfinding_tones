(this.webpackJsonppathfinding_tones=this.webpackJsonppathfinding_tones||[]).push([[0],{10:function(e,t,n){e.exports=n(15)},15:function(e,t,n){"use strict";n.r(t);var a,i,r=n(0),o=n.n(r),c=n(9),u=n.n(c),s=n(4),l=n(1),h=n(5);a||(a=new window.AudioContext,(i=a.createGain()).connect(a.destination),i.gain.value=-.99);var d,f=function(){var e=a.createOscillator();return e.connect(i),e.connect(a.destination),e.type="square",e},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=f();n&&(n.frequency.value=e,n.start(),setTimeout((function(){n.stop()}),t))},g=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;t.length&&(p(t[0],n),setTimeout((function(){e(t.slice(1))}),n))},v=function(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;e.globalAlpha=o,e.strokeStyle=r,e.beginPath(),e.moveTo(t,n),e.lineTo(a,i),e.stroke(),e.closePath(),e.globalAlpha=1};!function(e){e[e.OBSTACLE=0]="OBSTACLE",e[e.UNEXPLORED=1]="UNEXPLORED",e[e.EXPLORING=2]="EXPLORING",e[e.EXPLORED=3]="EXPLORED"}(d||(d={}));var m=function e(t,n){var a=this;Object(l.a)(this,e),this.x=void 0,this.y=void 0,this.state=d.UNEXPLORED,this.neighbors=void 0,this.metadata=void 0,this.reset=function(){a.metadata={},a.state!==d.OBSTACLE&&(a.state=d.UNEXPLORED)},this.addNeighbor=function(e){a.neighbors.push(e)},this.setUnexplored=function(){a.state=d.UNEXPLORED},this.setExplored=function(){a.state=d.EXPLORED},this.setExploring=function(){a.state=d.EXPLORING},this.isExplored=function(){return a.state===d.EXPLORED},this.isObstacle=function(){return a.state===d.OBSTACLE},this.getNeighbors=function(){return a.neighbors.filter((function(e){return e.state!==d.OBSTACLE}))},this.getUnexploredNeighbors=function(){return a.neighbors.filter((function(e){var t=e.state;return t===d.UNEXPLORED||t===d.EXPLORING}))},this.distanceTo=function(e){return Math.abs(a.x-e.x)+Math.abs(a.y-e.y)},this.euclideanDistanceTo=function(e){return Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))},this.toggleWall=function(){a.state=a.state===d.OBSTACLE?d.UNEXPLORED:d.OBSTACLE},this.render=function(e,t,n,i,r){var o;switch(a.state){case d.OBSTACLE:o="#222831";break;case d.UNEXPLORED:o="#eeeeee";break;case d.EXPLORING:o="#d6c4c1";break;case d.EXPLORED:o="#bdbdbd";break;default:o="#222831"}!function(e,t,n,a,i){e.fillStyle=i,e.fillRect(t,n,a,a)}(e,t,n,i,r||o)},this.x=t,this.y=n,this.neighbors=[],this.metadata={}},E=function(){function e(t,n,a){var i=this;Object(l.a)(this,e),this.currentTick=void 0,this.width=void 0,this.height=void 0,this.cellSize=void 0,this.cols=void 0,this.start=void 0,this.destination=void 0,this.search=void 0,this.finished=void 0,this.get=function(e,t){return i.cols[t][e]},this.getCellAtScreen=function(e,t){var n=Math.floor(e/i.cellSize),a=Math.floor(t/i.cellSize);return i.get(n,a)},this.setCellStateAtScreen=function(e,t,n){var a=Math.floor(e/i.cellSize),r=Math.floor(t/i.cellSize),o=i.get(a,r).state;return i.get(a,r).state=n,o!==n},this.setSearch=function(e){i.search=e},this.reset=function(){i.cols.forEach((function(e){e.forEach((function(e){e.reset()}))})),i.currentTick=0,i.finished=!1},this.tick=function(){return i.search&&!i.finished&&(i.currentTick++,i.finished=i.search.tick()),i.finished},this.onClick=function(e,t){i.getCellAtScreen(e,t).toggleWall()},this.getCurrentPath=function(){return i.search?i.finished?i.search.getShortestPath():i.search.getPathFromStartToCell(i.search.getUpdatedThisTick().slice(-1)[0]):[]},this.getNumExplored=function(){return i.cols.reduce((function(e,t){return e+t.reduce((function(e,t){return e+(t.isExplored()?1:0)}),0)}),0)},this.getUpdatedCells=function(){return i.search?i.search.getUpdatedThisTick():[]},this.playTonesForUpdatedCells=function(){if(i.search){var e=i.getNormalizedFrequenciesForCells(i.search.getUpdatedThisTick());g(e)}},this.playTonesForCurrentPath=function(){var e=i.getNormalizedFrequenciesForCells(i.getCurrentPath().reverse());g(e)},this.getNormalizedFrequenciesForCells=function(e){var t=i.start.distanceTo(i.destination);return e.map((function(e){return Math.floor((t-e.distanceTo(i.destination))/t*2e3)}))},this.getDebugOutput=function(){var e;return(null===(e=i.search)||void 0===e?void 0:e.getDebugOutput())||""},this.currentTick=0,this.width=t,this.height=n,this.cellSize=a,this.cols=e.createGrid(t,n),this.start=this.get(5,5),this.start.setUnexplored(),this.destination=this.get(t-6,n-6),this.destination.setUnexplored(),this.finished=!1}return Object(h.a)(e,null,[{key:"createGrid",value:function(t,n){for(var a=[],i=0;i<n;i++){for(var r=[],o=0;o<t;o++)r.push(new m(o,i));a.push(r)}return e.initializeNeighbors(a)}},{key:"initializeNeighbors",value:function(e){var t=e.length,n=e[0].length;return e.forEach((function(a,i){a.forEach((function(a,r){i>0&&a.addNeighbor(e[i-1][r]),i<t-1&&a.addNeighbor(e[i+1][r]),r>0&&a.addNeighbor(e[i][r-1]),r<n-1&&a.addNeighbor(e[i][r+1])}))})),e}}]),e}(),b=n(3),S=n(2),T=n(6),k=function e(t,n){var a=this;Object(l.a)(this,e),this.destination=void 0,this.updatedThisTick=void 0,this.tick=function(){return!0},this.getUpdatedThisTick=function(){return a.updatedThisTick},this.getShortestPath=function(){return a.getPathFromStartToCell(a.destination).reverse()},this.getPathFromStartToCell=function(e){for(var t=[],n=e;n;)t.push(n),n=n.metadata.prev;return t.reverse()},this.getDebugOutput=function(){return""},this.destination=n,this.updatedThisTick=[]},O={Dijkstra:function(e){Object(b.a)(n,e);var t=Object(S.a)(n);function n(e,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).queue=void 0,i.tick=function(){if(i.queue.length){i.updatedThisTick=[];var e=i.queue.pop();return e===i.destination||(e.getUnexploredNeighbors().forEach((function(t){t.setExploring();var n=e.distanceTo(t)+e.metadata.distanceFromSource;(void 0===t.metadata.distanceFromSource||n<t.metadata.distanceFromSource)&&(t.metadata.distanceFromSource=n,t.metadata.prev=e),i.queue.data.includes(t)||i.queue.push(t),i.updatedThisTick.push(t)})),e.setExplored(),i.updatedThisTick.push(e),!1)}return!0},i.getDebugOutput=function(){var e="Queue\n";return e+=i.queue.data.map((function(e){var t=e.x,n=e.y,a=e.metadata;return"(".concat(t,", ").concat(n,") ").concat(a.distanceFromSource)})).join("\n")},e.metadata.distanceFromSource=0,i.queue=new T.a([e],(function(e,t){return e.metadata.distanceFromSource-t.metadata.distanceFromSource})),i}return n}(k),"A*":function(e){Object(b.a)(n,e);var t=Object(S.a)(n);function n(e,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).openSet=void 0,i.tick=function(){if(i.openSet.length){i.updatedThisTick=[];var e=i.openSet.pop();return e===i.destination||(e.getNeighbors().forEach((function(t){var n=e.metadata.gScore+e.distanceTo(t);(void 0===t.metadata.gScore||n<t.metadata.gScore)&&(t.metadata.prev=e,t.metadata.gScore=n,t.metadata.fScore=t.metadata.gScore+t.euclideanDistanceTo(i.destination),i.openSet.data.includes(t)||i.openSet.push(t),t.setExploring(),i.updatedThisTick.push(t))})),e.setExplored(),i.updatedThisTick.push(e),!1)}return!0},i.getDebugOutput=function(){var e="Queue\n";return e+=i.openSet.data.map((function(e){var t=e.x,n=e.y,a=e.metadata;return"(".concat(t,", ").concat(n,") ").concat(a.fScore.toFixed(3))})).join("\n")},e.metadata.fScore=e.euclideanDistanceTo(a),e.metadata.gScore=0,i.openSet=new T.a([e],(function(e,t){return e.metadata.fScore-t.metadata.fScore})),i}return n}(k),"Breadth-first search":function(e){Object(b.a)(n,e);var t=Object(S.a)(n);function n(e,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).queue=void 0,i.tick=function(){if(i.queue.length){i.updatedThisTick=[];var e=i.queue.shift();return e===i.destination||(e.getUnexploredNeighbors().forEach((function(t){t.setExploring(),t.metadata.prev=e,i.queue.includes(t)||i.queue.push(t),i.updatedThisTick.push(t)})),e.setExplored(),i.updatedThisTick.push(e),!1)}return!0},i.getDebugOutput=function(){var e="Queue\n";return e+=i.queue.map((function(e){var t=e.x,n=e.y;return"(".concat(t,", ").concat(n,")")})).join("\n")},i.queue=[e],i}return n}(k),"Depth-first search":function(e){Object(b.a)(n,e);var t=Object(S.a)(n);function n(e,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).stack=void 0,i.tick=function(){if(i.stack.length){i.updatedThisTick=[];var e=i.stack.pop();return e===i.destination||(e.getUnexploredNeighbors().forEach((function(t){t.setExploring(),t.metadata.prev=e,i.stack.push(t),i.updatedThisTick.push(t)})),e.setExplored(),i.updatedThisTick.push(e),!1)}return!0},i.getDebugOutput=function(){var e="Stack\n";return e+=i.stack.map((function(e){var t=e.x,n=e.y;return"(".concat(t,", ").concat(n,")")})).join("\n")},i.stack=[e],i}return n}(k),Random:function(e){Object(b.a)(n,e);var t=Object(S.a)(n);function n(e,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).queue=void 0,i.tick=function(){if(i.queue.length){i.updatedThisTick=[];var e=i.queue.splice(Math.floor(Math.random()*i.queue.length),1)[0];return e===i.destination||(e.getUnexploredNeighbors().forEach((function(t){t.setExploring(),t.metadata.prev=e,i.queue.push(t),i.updatedThisTick.push(t)})),e.setExplored(),i.updatedThisTick.push(e),!1)}return!0},i.queue=[e],i}return n}(k)},x=n(7),C=function(e){var t=e.onMouseDown,n=e.grid,a=n.width*n.cellSize,i=n.height*n.cellSize,r=o.a.useRef(null),c=o.a.useState(null),u=Object(s.a)(c,2),l=u[0],h=u[1],f=o.a.useCallback((function(){var e=r.current;if(e){var t=e.getContext("2d");!function(e,t){for(var n=0;n<t.height;n++)for(var a=0;a<t.width;a++){var i=t.get(a,n),r=void 0;i===t.start?r="#00adb5":i===t.destination&&(r="#bb596b"),i.render(e,a*t.cellSize,n*t.cellSize,t.cellSize,r)}}(t,n),function(e,t){for(var n=0;n<=t.height;n++)v(e,0,n*t.cellSize,t.width*t.cellSize,n*t.cellSize,"black",.3);for(var a=0;a<=t.height;a++)v(e,a*t.cellSize,0,a*t.cellSize,t.height*t.cellSize,"black",.3)}(t,n),function(e,t,n){for(var a=0;a<t.length-1;a++){var i=t[a],r=i.x,o=i.y,c=t[a+1],u=c.x,s=c.y,l=Math.floor(n/2);v(e,r*n+l,o*n+l,u*n+l,s*n+l)}}(t,n.getCurrentPath(),n.cellSize)}}),[n]);o.a.useEffect((function(){f()}),[n,n.currentTick,f]);var p=function(e,t){var n=r.current,a=0,i=0;if(n){var o=n.getBoundingClientRect();a=Math.max(0,Math.floor(e-o.left)),i=Math.max(0,Math.floor(t-o.top))}return{x:a,y:i}};return o.a.createElement(o.a.Fragment,null,o.a.createElement("canvas",{ref:r,width:a,height:i,onMouseDown:function(e){var a=e.clientX,i=e.clientY,r=p(a,i),o=r.x,c=r.y,u=n.getCellAtScreen(o,c).state===d.OBSTACLE?d.UNEXPLORED:d.OBSTACLE;h(u),n.setCellStateAtScreen(o,c,u),f(),t()},onMouseUp:function(){h(null)},onMouseMove:function(e){var t=e.clientX,a=e.clientY;if(null!==l){var i=p(t,a),r=i.x,o=i.y;n.setCellStateAtScreen(r,o,l),f()}}}))},y={select:{width:"50%",padding:"10px"}},w=function(e){var t=e.value,n=e.options,a=e.onChange;return o.a.createElement("select",{value:t,onChange:a,style:y.select},n.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))},P={container:{width:"100%",display:"flex",alignItems:"center",flexDirection:"column"},canvasContainer:{margin:"25px"},controlsContainer:{display:"flex",justifyContent:"center",width:"100%",marginBottom:"15px"},debugControl:{cursor:"pointer",userSelect:"none"},playButton:{marginBottom:"10px"},button:{padding:"5px"},buttonsContainer:{display:"flex",flexDirection:"column",marginLeft:"10px",width:"120px"},delay:{marginLeft:"10px",textAlign:"center",padding:"5px"}},D=function(e){var t=e.grid,n=e.algorithm,a=e.playing,i=e.delay,r=e.onClickPlay,c=e.onClickNewGrid,u=e.onChangeAlgorithm,l=e.onChangeDelay,h=e.onDraw,d=o.a.useState(!1),f=Object(s.a)(d,2),p=f[0],g=f[1];return o.a.createElement("div",{style:P.container},o.a.createElement("div",{style:P.canvasContainer},o.a.createElement(C,{onMouseDown:h,grid:t})),o.a.createElement("div",{style:P.controlsContainer},o.a.createElement(w,{value:n,options:Object.keys(O),onChange:u}),o.a.createElement("div",{style:P.buttonsContainer},o.a.createElement("button",{style:Object(x.a)(Object(x.a)({},P.button),P.playButton),onClick:r},a?"Pause":"Play"),o.a.createElement("button",{style:P.button,onClick:c},"Reset"))),o.a.createElement("p",{onClick:function(){return g(!p)},style:P.debugControl},"[",p?"-] Hide":"+] Show"," debug controls"),p&&o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"Step delay (ms)",o.a.createElement("input",{type:"number",style:P.delay,value:i,min:"10",max:"500",step:"25",onChange:l})),o.a.createElement("p",null,"Explored: ",t.getNumExplored()," \xb7 Current path length: ",t.getCurrentPath().length),o.a.createElement("p",null)))},N={container:{alignItems:"flex-start",display:"flex",flexDirection:"column"},canvasContainer:{alignSelf:"center"}},j=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=o.a.useState("A*"),r=Object(s.a)(i,2),c=r[0],u=r[1],l=o.a.useState(25),h=Object(s.a)(l,2),d=h[0],f=h[1],p=o.a.useState(new E(30,30,15)),g=Object(s.a)(p,2),v=g[0],m=g[1],b=o.a.useState(0),S=Object(s.a)(b,2),T=(S[0],S[1]),k=o.a.useCallback((function(){T(0),v.reset(),v.setSearch(function(e,t){return new O[e](t.start,t.destination)}(c,v))}),[c,v]);return o.a.useEffect((function(){k(),a(!1)}),[c,v,k]),o.a.useEffect((function(){var e;return n&&function t(){n&&(v.tick()?(v.playTonesForCurrentPath(),a(!1)):(T((function(e){return e+1})),v.playTonesForUpdatedCells(),e=setTimeout(t,d)))}(),function(){return clearTimeout(e)}}),[n,v,d]),o.a.createElement("div",{style:N.container},o.a.createElement("h2",null,"The sound of pathfinding"),o.a.createElement("p",null,o.a.createElement("strong",null,"Why I built this:"),"Inspired by the classic ",o.a.createElement("a",{href:"https://www.youtube.com/watch?v=kPRA0W1kECg",target:"_blank",rel:"noopener noreferrer nofollow"},"15 Sorting Algorithms in 6 minutes")," I wanted to know what different pathfinding algorithms ",o.a.createElement("em",null,"sound")," like."),o.a.createElement("p",null,"A note is played every time a node is explored, with a pitch relative to the Manhattan distance between the node and the goal."),o.a.createElement("p",null),o.a.createElement("div",{style:N.canvasContainer},o.a.createElement(D,{grid:v,playing:n,algorithm:c,delay:d,onClickNewGrid:function(){a(!1),T(0),m(new E(30,30,15))},onClickPlay:function(){v.finished&&k(),a(!n)},onChangeAlgorithm:function(e){u(e.currentTarget.value)},onChangeDelay:function(e){f(Number(e.currentTarget.value))},onDraw:function(){k(),a(!1)}})))};u.a.render(o.a.createElement(j),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.6f8e9e2f.chunk.js.map